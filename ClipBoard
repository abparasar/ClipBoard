import fasttext
import pandas as pd

# Load FastText pretrained model
model = fasttext.load_model("lid.176.bin")

# Sample DataFrame
df = pd.DataFrame({
    'utterance': [
        "Hello, how are you?",
        "à¤¨à¤®à¤¸à¥à¤¤à¥‡, à¤†à¤ª à¤•à¥ˆà¤¸à¥‡ à¤¹à¥ˆà¤‚?",
        "Bonjour, comment Ã§a va ?",
        "fax a complaint",
        "ä½ å«ä»€ä¹ˆåå­—ï¼Ÿ",
        "oye",
        "haan bolo",
        "What is your name?"
    ]
})

# Function to check if language is English
def is_english(text):
    try:
        lang = model.predict(text.strip().replace('\n', ''))[0][0]
        return lang == '__label__en'
    except:
        return False

# Filter
df_english = df[df['utterance'].apply(is_english)].reset_index(drop=True)
df_non_english = df[~df['utterance'].apply(is_english)].reset_index(drop=True)

# Result
print("âœ… English utterances:")
print(df_english)

print("\nğŸš« Non-English utterances:")
print(df_non_english)